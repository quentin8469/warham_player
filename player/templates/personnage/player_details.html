{% extends "base/base.html" %}
{% load static %}

{% block content %}
{% if user.is_authenticated %}
    {% if player.id == profil_initial.player.id%}
        <div class="container w-auto p-3">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{% url 'playeur:details_personnage' pk=player.id %}">Profil</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="{% url 'playeur:description' pk=player.id %}">Description</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="{% url 'playeur:magie' pk=player.id %}">Magies</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'playeur:competences' pk=player.id %}">Competences</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'playeur:equipements' pk=player.id %}">Equipements</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'playeur:morts_tuer' pk=player.id %}">Notes & Morts tués</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'playeur:montures' pk=player.id %}">Montures</a>
                </li>
            </ul>         
            <div class="container">
                <div class="row">
                    <div class="col-auto order-first">
                        {% if player.photo %}
                                <img src="{{ player.photo.url }}"alt="Image"><br>
                        {% endif %}
                        
                        <div>
                            <a class="btn btn-primary" aria-current="page" href="{% url 'playeur:editter_personnage' pk=player.id %}">modifier</a>
                            <a class="btn btn-danger" aria-current="page" href="{% url 'playeur:effacer_personnage' pk=player.id %}">supprimer</a>
                        </div>
                    </div>
                    <div class="col-auto">
                        <p class="p-1 border bg-light">NOM: {{ player.nom }}</p>
                        <p class="p-1 border bg-light">Age: {{ player.age }} </p>
                        <p class="p-1 border bg-light">Yeux: {{ player.yeux }} </p>
                        <p class="p-1 border bg-light">Blessures max: {{ profil_actuel.point_blessure }}</p>
                        <p class="p-1 border bg-light">Point_magie: {{ player.point_magie }}</p>
                        <p class="p-1 border bg-light">Experience totale: {{ player.experience  }} Xp</p>
                        <p class="p-1 border bg-light">Vocation: {{ player.vocation }}</p>                   
                    </div>
                    <div class="col-auto">
                        <p class="p-1 border bg-light">Race: {{ player.race}}</p>
                        <p class="p-1 border bg-light">Taille: {{ player.taille }} </p>
                        <p class="p-1 border bg-light">Cheveux: {{ player.cheveux }} </p>
                        <p class="p-1 border bg-light">Point destin: {{ player.point_destin }}</p>
                        <p class="p-1 border bg-light">nombre_sort: {{ player.nombre_sort }}</p>
                        <p class="p-1 border bg-light">encombrement_max: {{ player.encombrement_max }}</p>  
                        <p class="p-1 border bg-light">Carriere actuelle: {{ player.carriere_actuelle }}</p>                
                    </div>
                    <div class="col-auto order-last">
                        <p class="p-1 border bg-light">Sexe: {{ player.sexe }}</p>
                        <p class="p-1 border bg-light">Poids: {{ player.poids }} </p>
                        <p class="p-1 border bg-light">Alignement: {{ player.alignement }}</p>
                        <p class="p-1 border bg-light">Point_folie: {{ player.point_folie }}</p>
                        <p class="p-1 border bg-light">Famillier: {{ player.famillier }}</p>
                        <p class="p-1 border bg-light">encombrement_actuel: {{ player.encombrement_actuel }}</p> 
                        <p class="p-1 border bg-light">langue: {{ player.langue }}</p>                 
                    </div>
                    
                </div>
                <p class="p-1 border bg-light">Cheminement professionel: {{ player.cheminement_professionel }} </p>
                    <p class="p-1 border bg-light">Débouches: {{ player.debouches}}</p> 
            </div>
            <div class="container">
                <table class="table table-sm">
                    <thead>
                    <tr>
                        <th scope="col">
                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="{% url 'playeur:plan_carriere' pk=player.id %}">ajouter carriere</a>
                                </li>
                            </ul> 
                        </th>
                        <th scope="col">M</th>
                        <th scope="col">CC</th>
                        <th scope="col">CT</th>
                        <th scope="col">F</th>
                        <th scope="col">E</th>
                        <th scope="col">B</th>
                        <th scope="col">I</th>
                        <th scope="col">A</th>
                        <th scope="col">Dex</th>
                        <th scope="col">Cd</th>
                        <th scope="col">Int</th>
                        <th scope="col">Cl</th>
                        <th scope="col">FM</th>
                        <th scope="col">Soc</th>
                        <th scope="col">modifier</th>
                        <th scope="col">supprimer</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="table-secondary">
                        <th>profil initial</th>
                        <td >{{ profil_initial.mouvement }}</td>
                        <td>{{ profil_initial.capacite_combat }}</td>
                        <td>{{ profil_initial.capacité_tir }}</td>
                        <td>{{ profil_initial.force }}</td>
                        <td>{{ profil_initial.endurance }}</td>
                        <td>{{ profil_initial.point_blessure }}</td>
                        <td>{{ profil_initial.initiative }}</td>
                        <td>{{ profil_initial.nb_attaque }}</td>
                        <td>{{ profil_initial.dexterite }}</td>
                        <td>{{ profil_initial.commandement }}</td>
                        <td>{{ profil_initial.intelligence }}</td>
                        <td>{{ profil_initial.calme }}</td>
                        <td>{{ profil_initial.force_mentale }}</td>
                        <td>{{ profil_initial.sociabilite }}</td>
                        <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_carac_base' pk=profil_initial.id %}">modifier</a></td>
                        <td></td>
                    </tr>
                    {% for plan in plan_carrieres %}
                    <tr class="table-warning">
                        {% if plan.nom %}
                        <th> {{ plan.nom }}</th>
                        {% else %}
                        <th> plan de carriere</th>
                        {% endif %}
                        <td>{{ plan.mouvement }}</td>
                        <td>{{ plan.capacite_combat }}</td>
                        <td>{{ plan.capacité_tir }}</td>
                        <td>{{ plan.force }}</td>
                        <td>{{ plan.endurance }}</td>
                        <td>{{ plan.point_blessure }}</td>
                        <td>{{ plan.initiative }}</td>
                        <td>{{ plan.nb_attaque }}</td>
                        <td>{{ plan.dexterite }}</td>
                        <td>{{ plan.commandement }}</td>
                        <td>{{ plan.intelligence }}</td>
                        <td>{{ plan.calme }}</td>
                        <td>{{ plan.force_mentale }}</td>
                        <td>{{ plan.sociabilite }}</td>
                        <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_carriere' pk=plan.id %}">modifier</a></td>
                        <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:effacer_carriere' pk=plan.id %}">supprimer</a></td>  
                    </tr>
                    {% endfor %}
                    <tr class="table-success">
                        <th>profil actuel</th>
                        <td>{{ profil_actuel.mouvement }}</td>
                        <td>{{ profil_actuel.capacite_combat }}</td>
                        <td>{{ profil_actuel.capacité_tir }}</td>
                        <td>{{ profil_actuel.force }}</td>
                        <td>{{ profil_actuel.endurance }}</td>
                        <td>{{ profil_actuel.point_blessure }}</td>
                        <td>{{ profil_actuel.initiative }}</td>
                        <td>{{ profil_actuel.nb_attaque }}</td>
                        <td>{{ profil_actuel.dexterite }}</td>
                        <td>{{ profil_actuel.commandement }}</td>
                        <td>{{ profil_actuel.intelligence }}</td>
                        <td>{{ profil_actuel.calme }}</td>
                        <td>{{ profil_actuel.force_mentale }}</td>
                        <td>{{ profil_actuel.sociabilite }}</td>
                        <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_carac_actuelle' pk=profil_actuel.id %}">modifier</a></td>
                        <td></td>  
                    </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <div class="container">
                <div>
                    <p>Point de vie: {{ profil_actuel.point_blessure }}</p>
                    <table class="table table-striped">
                        <thead>
                            
                            <tr>
                            <th scope="col">#</th>
                            <th scope="col">#</th>
                            <th scope="col">#</th>
                            
                            </tr>
                            
                        </thead>
                        
                    </table>
                </div><br>
                <div>
                    <p>point de magie: {{ player.point_magie }}</p>
                </div>
            </div>
            <br>
            <div class="container">
                <div class="row">
                    <div class="col-auto ">
                        <h6><strong>Arme de contact</strong></h6>
                        <table class="table table-striped table-primary table-sm">
                            <thead>
                                <tr>
                                <th scope="col">
                                    <ul class="nav nav-tabs">
                                        <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="{% url 'playeur:armes_contacts' pk=player.id %}"><small>Ajouter arme</small></a>
                                        </li>
                                    </ul>
                                </th>
                                <th scope="col">I</th>
                                <th scope="col">CC</th>
                                <th scope="col">D</th>
                                <th scope="col">Prd</th>
                                <th scope="col">Enc</th>
                                <th scope="col">Note</th>
                                <th scope="col">modifier</th>
                                <th scope="col">supprimer</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for arme_contact in armes_contacts %}
                                <tr>
                                <th scope="row">{{ arme_contact.nom }}</th>
                                
                                <td>{{ arme_contact.initiative }}</td>
                                <td>{{ arme_contact.toucher }}</td>
                                <td>{{ arme_contact.degats }}</td>
                                <td>{{ arme_contact.parade }}</td>
                                <td>{{ arme_contact.encombrement }}</td>
                                <td>{{ arme_contact.note }}</td>
                                <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_arme_contact' pk=arme_contact.id %}">modifier</a></td>
                                <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:effacer_arme_contact' pk=arme_contact.id %}">supprimer</a></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="col-auto">
                        <h6><strong>Arme a distance</strong></h6>
                        <table class="table table-striped table-secondary table-sm">
                            <thead>
                                <tr>
                                <th scope="col">
                                    <ul class="nav nav-tabs">
                                        <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="{% url 'playeur:armes_distances' pk=player.id %}"><small>Ajouter arme</small></a>
                                        </li>
                                    </ul>
                                </th>
                                <th scope="col">PC</th>
                                <th scope="col">PL</th>
                                <th scope="col">PE</th>
                                <th scope="col">FE</th>
                                <th scope="col">Armer/Tirer</th>
                                <th scope="col">Enc</th>
                                <th scope="col">Type munitions</th>
                                <th scope="col">nb_mun</th>
                                <th scope="col">note</th>
                                <th scope="col"><small>modifier</small> </th>
                                <th scope="col"><small>supprimer</small></th>
                                </tr>
                                <tbody>
                                    {% for arme_distance in armes_distances %}
                                    <tr>
                                    <th scope="row">{{ arme_distance.nom }}</th>
                                    <td>{{ arme_distance.porte_courte }}</td>
                                    <td>{{ arme_distance.porte_longue }}</td>
                                    <td>{{ arme_distance.porte_extreme }}</td>
                                    <td>{{ arme_distance.force_effective }}</td>
                                    <td>{{ arme_distance.armer_tirer }}</td>
                                    <td>{{ arme_distance.encombrement }}</td>
                                    <td>{{ arme_distance.munitions }}</td>
                                    <td>{{ arme_distance.nb_munitions }}</td>
                                    <td>{{ arme_distance.note }}</td>
                                    <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_arme_distance' pk=arme_distance.id %}">modifier</a></td>
                                    <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:effacer_arme_distance' pk=arme_distance.id %}">supprimer</a></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </thead>
                        </table>
                    </div>
                    <div class="col-auto"> 
                        <h6><strong>Armure</strong></h6>
                        <table class="table table-striped table-info table-sm">
                            <thead>
                                <tr>
                                <th scope="col">
                                    <ul class="nav nav-tabs">
                                        <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="{% url 'playeur:armures' pk=player.id %}"><small>Ajouter armure</small></a>
                                        </li>
                                    </ul>
                                </th>
                                
                                <th scope="col">protection</th>
                                <th scope="col">localisation</th>
                                <th scope="col">encombrement</th>
                                <th scope="col">note</th>
                                <th scope="col">modifier</th>
                                <th scope="col">supprimer</th>
                                </tr>
                                <tbody>
                                    {% for armure in armures %}
                                    <tr>
                                    <th scope="row">{{ armure.nom }}</th>
                                    
                                    <td>{{ armure.protection  }}</td>
                                    <td>{{ armure.localisation  }}</td>
                                    <td>{{ armure.encombrement  }}</td>
                                    <td>{{ armure.note  }}</td>
                                    <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:editter_armure' pk=armure.id %}">modifier</a></td>
                                    <td><a class="nav-link active" aria-current="page" href="{% url 'playeur:effacer_armure' pk=armure.id %}">supprimer</a></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div> 
    {% else %}
    <h3>Profil intial non  crée!</h3>
    <a class="" href="{% url 'playeur:liste_personnages' %}" >Retour page principale</a>
    {% endif %}
{% endif %}
{% endblock %}  